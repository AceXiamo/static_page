<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <style>
      .highlight {
        background-color: rgb(219, 108, 252);
        color: white;
      }
    </style>
  </head>
  <body>
    <input id="input" type="text" placeholder="输入文字进行高亮" />
    <div class="content">
      <div>这是测试文本，包含单词'test'</div>
      <div>这是另一段文本，也包含单词'test'</div>
    </div>
    <script>
      function highlightText() {
        let input = document.getElementById('input').value
        if (input !== '') {
          const container = document.querySelector('.content')
          const html = container.innerHTML
          const highlightedText = `<span class='highlight'>${input}</span>`
          const regex = new RegExp(input, 'g')
          const newHtml = html.replace(regex, highlightedText)
          container.innerHTML = newHtml
        }
      }

      function removeHighlight() {
        let highlightedItems = Array.from(document.querySelectorAll('.highlight'))
        highlightedItems.forEach((item) => {
          item.outerHTML = item.textContent
        })
      }

      document.getElementById('input').addEventListener('keyup', function () {
        removeHighlight()
        highlightText()
      })
    </script>
  </body>
</html>
